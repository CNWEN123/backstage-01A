# çœŸäººè·å®˜è§†è®¯åå°ç®¡ç†ç³»ç»Ÿ V2.1

## é¡¹ç›®æ¦‚è¿°
- **åç§°**: Live Dealer Admin System
- **ç‰ˆæœ¬**: V2.1
- **ç›®æ ‡**: çœŸäººè·å®˜è§†è®¯å¹³å°çš„ä¸­å¤®åå°æ§åˆ¶æ¢çº½ï¼Œæä¾›å…¨æ–¹ä½çš„è¿è¥ç®¡ç†å¹³å°
- **æŠ€æœ¯æ ˆ**: Hono + TypeScript + Cloudflare Workers + D1 Database + TailwindCSS

## è®¿é—®åœ°å€
- **é¢„è§ˆåœ°å€**: https://3000-iuwuqi7rz0v5niuhr74wf-cc2fbc16.sandbox.novita.ai
- **ç™»å½•è´¦å·**: admin_root / admin123

## 11å¤§æ ¸å¿ƒæ¨¡å—

### æ ¸å¿ƒä¸šåŠ¡æ¨¡å—
| æ¨¡å— | åŠŸèƒ½ | è·¯ç”± |
|------|------|------|
| 1. ä»ªè¡¨ç›˜ | KPIæŒ‡æ ‡ã€å®æ—¶æ•°æ®ã€è¶‹åŠ¿å›¾è¡¨ | `#dashboard` |
| 2. ç©å®¶æ§ç«¯ | CRMç”»åƒã€KYCã€ç”Ÿå‘½å‘¨æœŸç®¡ç† | `#players` |
| 3. å±‚çº§æ§ç«¯ | ä»£ç†æ ‘çŠ¶ç»“æ„ã€ä½£é‡‘æ¨¡å‹é…ç½® | `#agents` |
| 4. è´¢åŠ¡æ§ç«¯ | èµ„é‡‘æµæ°´ã€å­˜å–æ¬¾å®¡æ ¸ã€äººå·¥è°ƒæ•´ | `#finance` |
| 5. æ³¨å•æ§ç«¯ | å®æ—¶æ³¨å•ç›‘æ§ã€å†å²æŸ¥è¯¢ã€è§†é¢‘å›æ”¾ | `#bets` |
| 6. çº¢åˆ©ä¸æ´—ç  | **V2.1å‡çº§** - æ´—ç ç­–ç•¥é…ç½®ã€è‡ªåŠ¨ç»“ç®— | `#commission` |

### è¿è¥ç®¡ç†æ¨¡å—
| æ¨¡å— | åŠŸèƒ½ | è·¯ç”± |
|------|------|------|
| 7. é£é™©æ§ç«¯ | å¤§é¢é¢„è­¦ã€å¥—åˆ©è¯†åˆ«ã€é™çº¢ç®¡ç† | `#risk` |
| 8. æŠ¥è¡¨ä¸­å¿ƒ | å¤šç»´åº¦ç»è¥æŠ¥è¡¨ã€ç›ˆäºåˆ†æ | `#reports` |
| 9. å†…å®¹ç®¡ç† | æ¸¸æˆè§„åˆ™ã€å…¬å‘Šè·‘é©¬ç¯ç»´æŠ¤ | `#content` |
| 10. ç³»ç»Ÿè®¾ç½® | RBACæƒé™ã€2FAã€æ—¥å¿—å®¡è®¡ | `#system` |
| 11. ç°åœºè¿è¥ | **V2.1æ–°å¢** - è·å®˜æ¡£æ¡ˆã€æ™ºèƒ½æ’ç­ | `#studio` |

## V2.1 é‡ç‚¹å‡çº§

### æ´—ç ç³»ç»Ÿå‡çº§ ğŸ”¥
- ä»"ç®€å•è®¡ç®—"å‡çº§ä¸º"ç­–ç•¥é…ç½®"
- æ”¯æŒå¤šå¥—æ´—ç æ–¹æ¡ˆæ¨¡æ¿
- ä¸åŒæ¸¸æˆç±»å‹å·®å¼‚åŒ–è¿”æ°´æ¯”ä¾‹
- çµæ´»çš„ç»“ç®—å‘¨æœŸï¼ˆæ—¥ç»“/å‘¨ç»“/å®æ—¶ï¼‰
- æ™ºèƒ½å®¡æ ¸åˆ†æµï¼ˆå°é¢è‡ªåŠ¨ã€å¤§é¢äººå·¥ï¼‰

### ç°åœºè¿è¥æ§ç«¯ â­ æ–°å¢
- è·å®˜æ¡£æ¡ˆåº“ï¼ˆå·¥å·ã€è‰ºåã€å¤´åƒç®¡ç†ï¼‰
- æ¡Œå°é…ç½®ç®¡ç†ï¼ˆè§†é¢‘æµã€é™çº¢ç»„ï¼‰
- ç”˜ç‰¹å›¾å¯è§†åŒ–æ’ç­
- å†²çªæ£€æµ‹ä¸WebSocketå®æ—¶è”åŠ¨

### è´¢åŠ¡åŠŸèƒ½å¢å¼º ğŸ’°
- **äººå·¥å­˜æ¬¾/å–æ¬¾**: æ”¯æŒå¿«é€Ÿä¸ºç©å®¶æ‰‹åŠ¨å…¥è´¦æˆ–å‡ºæ¬¾
- **æ”¶æ¬¾æ–¹å¼ç®¡ç†**: æ”¯æŒUSDT (TRC20/ERC20)ã€é“¶è¡Œå¡ã€æ”¯ä»˜å®ã€å¾®ä¿¡ã€é“¶è”å¿«æ·ç­‰å¤šç§æ”¯ä»˜æ¸ é“
- **æ”¶æ¬¾äºŒç»´ç åŠŸèƒ½**: æ”¯æŒä¸ºæ¯ç§æ”¶æ¬¾æ–¹å¼é…ç½®äºŒç»´ç å›¾ç‰‡ï¼Œç”¨æˆ·ç«¯å¯æ‰«ç ä»˜æ¬¾
- **å­˜æ¬¾å®¡æ ¸å¢å¼º**: åˆ—è¡¨ã€è¯¦æƒ…ã€ç»Ÿè®¡ã€äººå·¥è¡¥å•ã€æ‰¹é‡å®¡æ ¸å…¨æµç¨‹

### ç©å®¶çŠ¶æ€ç®¡ç† ğŸ‘¥
- **åœ¨çº¿/ç¦»çº¿ç­›é€‰**: ç©å®¶åˆ—è¡¨æ”¯æŒæŒ‰åœ¨çº¿çŠ¶æ€ç­›é€‰
- **å®æ—¶åœ¨çº¿ç»Ÿè®¡**: æ˜¾ç¤ºåœ¨çº¿/ç¦»çº¿ç©å®¶æ•°é‡ç»Ÿè®¡å¡ç‰‡
- **è¸¢çº¿åŠŸèƒ½**: æ”¯æŒå°†åœ¨çº¿ç©å®¶å¼ºåˆ¶ä¸‹çº¿

## API æ¥å£

### ä»ªè¡¨ç›˜
- `GET /api/dashboard/stats` - è·å–ç»Ÿè®¡æ•°æ®

### ç©å®¶ç®¡ç†
- `GET /api/players` - ç©å®¶åˆ—è¡¨ï¼ˆæ”¯æŒå‚æ•°ï¼š`status`, `online_status`, `search`, `vip_level`, `risk_level`ï¼‰
- `GET /api/players/:id` - ç©å®¶è¯¦æƒ…
- `PUT /api/players/:id/status` - æ›´æ–°çŠ¶æ€
- `GET /api/players/online` - åœ¨çº¿ç©å®¶åˆ—è¡¨
- `GET /api/players/stats` - ç©å®¶ç»Ÿè®¡

### ä»£ç†ç®¡ç†
- `GET /api/agents` - ä»£ç†åˆ—è¡¨
- `GET /api/agents/tree` - ä»£ç†æ ‘å½¢ç»“æ„

### è´¢åŠ¡ç®¡ç†
- `GET /api/transactions` - äº¤æ˜“æµæ°´
- `GET /api/withdraws` - ææ¬¾ç”³è¯·
- `PUT /api/withdraws/:id` - å®¡æ ¸ææ¬¾
- `GET /api/deposits` - å­˜æ¬¾ç”³è¯·åˆ—è¡¨
- `GET /api/deposits/stats` - å­˜æ¬¾ç»Ÿè®¡
- `GET /api/deposits/:id` - å­˜æ¬¾è¯¦æƒ…
- `PUT /api/deposits/:id` - å®¡æ ¸å­˜æ¬¾
- `POST /api/deposits/supplement` - å­˜æ¬¾è¡¥å•
- `POST /api/deposits/batch-approve` - æ‰¹é‡å®¡æ ¸å­˜æ¬¾
- `POST /api/manual-deposit` - **äººå·¥å­˜æ¬¾**
- `POST /api/manual-withdraw` - **äººå·¥å–æ¬¾**
- `POST /api/manual-adjust` - äººå·¥è°ƒæ•´

### æ”¶æ¬¾æ–¹å¼è®¾ç½® (V2.1æ–°å¢)
- `GET /api/payment-methods` - æ”¶æ¬¾æ–¹å¼åˆ—è¡¨ï¼ˆæ”¯æŒUSDT/é“¶è¡Œå¡/æ”¯ä»˜å®ç­‰ï¼‰
- `POST /api/payment-methods` - æ·»åŠ æ”¶æ¬¾æ–¹å¼ï¼ˆæ”¯æŒ `qr_code_url` å­—æ®µé…ç½®äºŒç»´ç ï¼‰
- `PUT /api/payment-methods/:id` - æ›´æ–°æ”¶æ¬¾æ–¹å¼ï¼ˆå«äºŒç»´ç URLï¼‰
- `DELETE /api/payment-methods/:id` - ç¦ç”¨æ”¶æ¬¾æ–¹å¼

**æ”¶æ¬¾æ–¹å¼äºŒç»´ç åŠŸèƒ½è¯´æ˜**:
- æ¯ç§æ”¶æ¬¾æ–¹å¼å¯é…ç½®ä¸€ä¸ªäºŒç»´ç å›¾ç‰‡URL
- æ”¯æŒå®æ—¶é¢„è§ˆäºŒç»´ç 
- å‰ç«¯æ˜¾ç¤ºäºŒç»´ç é…ç½®çŠ¶æ€ï¼ˆå·²é…ç½®/æœªé…ç½®ï¼‰
- æä¾›äºŒç»´ç å…¨å±é¢„è§ˆä¸é“¾æ¥å¤åˆ¶åŠŸèƒ½

### æ³¨å•ç®¡ç†
- `GET /api/bets` - æ³¨å•åˆ—è¡¨

### æ´—ç ç®¡ç†
- `GET /api/commission/schemes` - æ´—ç æ–¹æ¡ˆ
- `GET /api/commission/records` - æ´—ç è®°å½•
- `PUT /api/commission/records/:id` - å®¡æ ¸æ´—ç 

### é£æ§ç®¡ç†
- `GET /api/risk/alerts` - é£æ§é¢„è­¦
- `GET /api/risk/limit-groups` - é™çº¢ç»„

### æŠ¥è¡¨ä¸­å¿ƒ
- `GET /api/reports/daily` - æ—¥æŠ¥è¡¨
- `GET /api/reports/game` - æ¸¸æˆæŠ¥è¡¨
- `GET /api/reports/leaderboard` - æ’è¡Œæ¦œ

### å†…å®¹ç®¡ç†
- `GET /api/contents` - å†…å®¹åˆ—è¡¨
- `POST /api/contents` - æ–°å¢å†…å®¹

### ç³»ç»Ÿç®¡ç†
- `GET /api/admins` - ç®¡ç†å‘˜åˆ—è¡¨
- `GET /api/audit-logs` - å®¡è®¡æ—¥å¿—
- `GET /api/system/configs` - ç³»ç»Ÿé…ç½®

### ç°åœºè¿è¥
- `GET /api/dealers` - è·å®˜åˆ—è¡¨
- `GET /api/tables` - æ¡Œå°åˆ—è¡¨
- `GET /api/shifts` - æ’ç­åˆ—è¡¨
- `POST /api/shifts` - æ–°å¢æ’ç­

### è®¤è¯
- `POST /api/auth/login` - ç™»å½•

## æ•°æ®æ¶æ„

### æ ¸å¿ƒæ•°æ®è¡¨ (28å¼ )
- `admins` - ç®¡ç†å‘˜è´¦å·ï¼ˆRBACï¼‰
- `players` - ç©å®¶ä¿¡æ¯
- `player_bank_cards` - ç©å®¶é“¶è¡Œå¡
- `player_sessions` - ç©å®¶ä¼šè¯ï¼ˆåœ¨çº¿çŠ¶æ€ï¼‰
- `player_tags` - ç©å®¶æ ‡ç­¾
- `agents` - ä»£ç†å±‚çº§
- `transactions` - èµ„é‡‘æµæ°´
- `deposit_requests` - å­˜æ¬¾ç”³è¯·
- `withdraw_requests` - ææ¬¾ç”³è¯·
- `payment_methods` - **æ”¶æ¬¾æ–¹å¼é…ç½®**ï¼ˆæ”¯æŒUSDTç­‰ï¼‰
- `bets` - æ³¨å•è®°å½•
- `game_results` - æ¸¸æˆç»“æœ
- `commission_schemes` - æ´—ç æ–¹æ¡ˆ
- `commission_records` - æ´—ç è®°å½•
- `bonus_records` - çº¢åˆ©è®°å½•
- `risk_alerts` - é£æ§é¢„è­¦
- `limit_groups` - é™çº¢ç»„
- `dealers` - è·å®˜æ¡£æ¡ˆ
- `game_tables` - æ¡Œå°é…ç½®
- `dealer_shifts` - æ’ç­è®°å½•
- `dealer_leaves` - è·å®˜è¯·å‡
- `contents` - å†…å®¹ç®¡ç†
- `audit_logs` - æ“ä½œæ—¥å¿—
- `system_configs` - ç³»ç»Ÿé…ç½®
- `vip_levels` - VIPç­‰çº§é…ç½®
- `game_rooms` - æ¸¸æˆæˆ¿é—´

## å¼€å‘æŒ‡å—

### æœ¬åœ°å¼€å‘
```bash
# å®‰è£…ä¾èµ–
npm install

# æ„å»ºé¡¹ç›®
npm run build

# åº”ç”¨æ•°æ®åº“è¿ç§»
npm run db:migrate:local

# å¯¼å…¥æµ‹è¯•æ•°æ®
npm run db:seed

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev:sandbox
```

### éƒ¨ç½²åˆ°Cloudflare
```bash
npm run build
wrangler pages deploy dist
```

## æµ‹è¯•è´¦å·

| è§’è‰² | ç”¨æˆ·å | å¯†ç  |
|------|--------|------|
| è¶…çº§ç®¡ç†å‘˜ | admin_root | admin123 |
| è´¢åŠ¡æ€»ç›‘ | finance_lead | finance123 |
| é£æ§ä¸“å‘˜ | risk_officer | risk123 |
| å®¢æœä¸»ç®¡ | cs_manager | cs123 |
| è¿è¥ä¸“å‘˜ | ops_staff | ops123 |

## è®¾è®¡åŸåˆ™
- **æ•°æ®å®æ—¶æ€§**: æ¯«ç§’çº§åŒæ­¥
- **æ“ä½œä¾¿æ·æ€§**: ä¼˜åŒ–äº¤äº’æµç¨‹
- **æƒé™ä¸¥æ§**: RBACç»†ç²’åº¦ç®¡ç†
- **é«˜ä¸€è‡´æ€§**: è´¢åŠ¡çº§æ•°æ®å‡†ç¡®
- **å®‰å…¨åˆè§„**: 2FAè®¤è¯ã€IPç™½åå•ã€æ“ä½œç•™ç—•

## æŠ€æœ¯ç‰¹è‰²
- åŸºäº Cloudflare Workers è¾¹ç¼˜è®¡ç®—
- D1 SQLite æ•°æ®åº“æŒä¹…åŒ–
- Hono è½»é‡çº§é«˜æ€§èƒ½æ¡†æ¶
- TailwindCSS ç°ä»£åŒ–UI
- Chart.js æ•°æ®å¯è§†åŒ–
- å“åº”å¼è®¾è®¡ï¼Œæ”¯æŒå¤šç«¯

## ç‰ˆæœ¬å†å²
- **V2.1.2** (2025-11-29) - æ”¶æ¬¾æ–¹å¼è®¾ç½®å¢åŠ ã€Œæ·»åŠ äºŒç»´ç ã€åŠŸèƒ½
- **V2.1.1** (2025-11-29) - äººå·¥å­˜å–æ¬¾ + æ”¶æ¬¾æ–¹å¼è®¾ç½®(USDT) + ç©å®¶åœ¨çº¿çŠ¶æ€ç­›é€‰
- **V2.1** (2025) - æ´—ç ç³»ç»Ÿå‡çº§ + ç°åœºè¿è¥æ§ç«¯æ–°å¢
- **V2.0** - 11å¤§æ ¸å¿ƒæ¨¡å—åŸºç¡€åŠŸèƒ½

---
ä¼ä¸šçº§å®‰å…¨æ ‡å‡† Â· ä¸¥æ§èµ„é‡‘é£é™©

æœ€åæ›´æ–°: 2025-11-29
